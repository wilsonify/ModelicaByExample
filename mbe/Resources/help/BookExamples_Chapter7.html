<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>BookExamples</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Chapter7<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter7"></A><A HREF="BookExamples.html#BookExamples"
>BookExamples</A>.Chapter7</H2>
<B>Models from Chapter 7</B>
<P>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
><IMG SRC="BookExamples.Chapter7.AndI.png" ALT="BookExamples.Chapter7.And" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall1"
><IMG SRC="BookExamples.Chapter7.BouncingBall1I.png" ALT="BookExamples.Chapter7.BouncingBall1" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall2"
><IMG SRC="BookExamples.Chapter7.BouncingBall2I.png" ALT="BookExamples.Chapter7.BouncingBall2" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall3"
><IMG SRC="BookExamples.Chapter7.BouncingBall3I.png" ALT="BookExamples.Chapter7.BouncingBall3" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.CountingSensor"
><IMG SRC="BookExamples.Chapter7.CountingSensorI.png" ALT="BookExamples.Chapter7.CountingSensor" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.EmptyingTank3"
><IMG SRC="BookExamples.Chapter7.EmptyingTank3I.png" ALT="BookExamples.Chapter7.EmptyingTank3" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
><IMG SRC="BookExamples.Chapter7.LagI.png" ALT="BookExamples.Chapter7.Lag" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuit"
><IMG SRC="BookExamples.Chapter7.LogicCircuitI.png" ALT="BookExamples.Chapter7.LogicCircuit" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag"
><IMG SRC="BookExamples.Chapter7.LogicCircuitWithLagI.png" ALT="BookExamples.Chapter7.LogicCircuitWithLag" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicEquation"
><IMG SRC="BookExamples.Chapter7.LogicEquationI.png" ALT="BookExamples.Chapter7.LogicEquation" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
><IMG SRC="BookExamples.Chapter7.NotI.png" ALT="BookExamples.Chapter7.Not" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Or"
><IMG SRC="BookExamples.Chapter7.OrI.png" ALT="BookExamples.Chapter7.Or" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.PeriodSensor"
><IMG SRC="BookExamples.Chapter7.PeriodSensorI.png" ALT="BookExamples.Chapter7.PeriodSensor" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.QuantizedSensor"
><IMG SRC="BookExamples.Chapter7.QuantizedSensorI.png" ALT="BookExamples.Chapter7.QuantizedSensor" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.SampleHoldSensor"
><IMG SRC="BookExamples.Chapter7.SampleHoldSensorI.png" ALT="BookExamples.Chapter7.SampleHoldSensor" WIDTH=80  HEIGHT=80 ></A>
<A HREF="BookExamples_Chapter7_SensorComparison.html#BookExamples.Chapter7.SensorComparison"
><IMG SRC="BookExamples.Chapter7.SensorComparisonI.png" ALT="BookExamples.Chapter7.SensorComparison" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<H3>Information</H3>
<PRE>The models in this package are taken from
Chapter 7 of:

'Introduction to Physical Modeling with Modelica'

by Michael Tiller
</PRE><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
>And</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall1"
>BouncingBall1</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall2"
>BouncingBall2</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.BouncingBall3"
>BouncingBall3</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.CountingSensor"
>CountingSensor</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.EmptyingTank1"
>EmptyingTank1</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.EmptyingTank2"
>EmptyingTank2</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.EmptyingTank3"
>EmptyingTank3</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuit"
>LogicCircuit</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag"
>LogicCircuitWithLag</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicEquation"
>LogicEquation</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
>Not</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Or"
>Or</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.PeriodSensor"
>PeriodSensor</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.QuantizedSensor"
>QuantizedSensor</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.SampleHoldSensor"
>SampleHoldSensor</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.SensorBenchmark"
>SensorBenchmark</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter7_SensorComparison.html#BookExamples.Chapter7.SensorComparison"
>SensorComparison</A>
</TD><TD>&nbsp;</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE And<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.AndI.png" ALT="BookExamples.Chapter7.And" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.And"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.And</H2>
<IMG SRC="BookExamples.Chapter7.AndD.png" ALT="BookExamples.Chapter7.And">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> And
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort1(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort2(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> outPort(n=1);
<font color="blue">equation </font>
  outPort.signal = inPort1.signal<font color="blue"> and </font>inPort2.signal;
<font color="blue">end </font>And;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BouncingBall1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.BouncingBall1I.png" ALT="BookExamples.Chapter7.BouncingBall1" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.BouncingBall1"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.BouncingBall1</H2>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>m</TD><TD>1.0</TD><TD>Mass of the ball [kg]</TD></TR>
<TR><TD>c</TD><TD>1e+4</TD><TD>Compliance [N/m]</TD></TR>
<TR><TD>d</TD><TD>20</TD><TD>Damping [N/(m.s)]</TD></TR>
<TR><TD>r</TD><TD>0.02</TD><TD>Radius of the ball [m]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> BouncingBall1
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>SIunits.Mass</A> m=1.0 <font color="darkgreen">&quot;Mass of the ball&quot;</font>;
  <font color="blue">parameter </font>Real c(<font color="blue">final </font>unit=&quot;N/m&quot;) = 1e+4 <font color="darkgreen">&quot;Compliance&quot;</font>;
  <font color="blue">parameter </font>Real d(<font color="blue">final </font>unit=&quot;N/(m.s)&quot;) = 20 <font color="darkgreen">&quot;Damping&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>SIunits.Radius</A> r=0.02 <font color="darkgreen">&quot;Radius of the ball&quot;</font>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Height"
>SIunits.Height</A> h(start=5.0) <font color="darkgreen">&quot;Height of the ball center&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SIunits.Velocity</A> v <font color="darkgreen">&quot;Velocity of the ball&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SIunits.Acceleration</A> a <font color="darkgreen">&quot;Acceleration of the ball&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Force"
>SIunits.Force</A> f <font color="darkgreen">&quot;Force on the ball&quot;</font>;
<font color="blue">equation </font>
  v = <font color="red">der</font>(h);
  a = <font color="red">der</font>(v);
  m*a = f - m*Modelica.Constants.g_n;
  f = <font color="blue">if </font>h &lt;= r<font color="blue"> then </font>-c*(h - r) - d*v<font color="blue"> else </font>0.0;
<font color="blue">end </font>BouncingBall1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BouncingBall2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.BouncingBall2I.png" ALT="BookExamples.Chapter7.BouncingBall2" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.BouncingBall2"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.BouncingBall2</H2>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>m</TD><TD>1.0</TD><TD>Mass of the ball [kg]</TD></TR>
<TR><TD>c_r</TD><TD>.725</TD><TD>Coef. of restitution</TD></TR>
<TR><TD>r</TD><TD>0.02</TD><TD>Radius of the ball [m]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> BouncingBall2
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>SIunits.Mass</A> m=1.0 <font color="darkgreen">&quot;Mass of the ball&quot;</font>;
  <font color="blue">parameter </font>Real c_r=.725 <font color="darkgreen">&quot;Coef. of restitution&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>SIunits.Radius</A> r=0.02 <font color="darkgreen">&quot;Radius of the ball&quot;</font>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Height"
>SIunits.Height</A> h(start=5.0) <font color="darkgreen">&quot;Height of the ball center&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SIunits.Velocity</A> v <font color="darkgreen">&quot;Velocity of the ball&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SIunits.Acceleration</A> a <font color="darkgreen">&quot;Acceleration of the ball&quot;</font>;
<font color="blue">equation </font>
  v = <font color="red">der</font>(h);
  a = <font color="red">der</font>(v);
  m*a = -m*Modelica.Constants.g_n;
  <font color="blue">when </font>h &lt;= r<font color="blue"> then</font>
    <font color="red">reinit</font>(v, -c_r*<font color="red">pre</font>(v));
  <font color="blue">end when</font>;
<font color="blue">end </font>BouncingBall2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BouncingBall3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.BouncingBall3I.png" ALT="BookExamples.Chapter7.BouncingBall3" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.BouncingBall3"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.BouncingBall3</H2>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>m</TD><TD>1</TD><TD>Mass of the ball [kg]</TD></TR>
<TR><TD>c_r</TD><TD>0.725</TD><TD>Coefficient of restitution</TD></TR>
<TR><TD>r</TD><TD>1e-3</TD><TD>Radius of the ball [m]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> BouncingBall3
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>SIunits.Mass</A> m=1 <font color="darkgreen">&quot;Mass of the ball&quot;</font>;
  <font color="blue">parameter </font>Real c_r=0.725 <font color="darkgreen">&quot;Coefficient of restitution&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>SIunits.Radius</A> r=1e-3 <font color="darkgreen">&quot;Radius of the ball&quot;</font>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Height"
>SIunits.Height</A> h(start=5.0) <font color="darkgreen">&quot;Height of the ball center&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SIunits.Velocity</A> v <font color="darkgreen">&quot;Velocity of the ball&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SIunits.Acceleration</A> a <font color="darkgreen">&quot;Acceleration of the ball&quot;</font>;
  Boolean bouncing(start=true) <font color="darkgreen">&quot;Is the ball to still be bouncing?&quot;</font>;
  Boolean impact <font color="darkgreen">&quot;Indicates when impact occurs&quot;</font>;
<font color="blue">equation </font>
  v = <font color="red">der</font>(h);
  a = <font color="red">der</font>(v);
  m*a = <font color="blue">if </font>bouncing<font color="blue"> then </font>-m*Modelica.Constants.g_n<font color="blue"> else </font>0;
<font color="blue">algorithm </font>
  impact := h &lt;= r;
  <font color="blue">when </font>{impact,impact<font color="blue"> and </font>v &lt;= 0}<font color="blue"> then</font>
    <font color="blue">if </font><font color="red">edge</font>(impact)<font color="blue"> then</font>
      bouncing := <font color="red">pre</font>(v) &lt;= 0;
      <font color="red">reinit</font>(v, -c_r*<font color="red">pre</font>(v));
    <font color="blue">else</font>
      <font color="red">reinit</font>(v, 0.0);
      bouncing := false;
    <font color="blue">end if</font>;
  <font color="blue">end when</font>;
<font color="blue">end </font>BouncingBall3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CountingSensor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.CountingSensorI.png" ALT="BookExamples.Chapter7.CountingSensor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.CountingSensor"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.CountingSensor</H2>
<IMG SRC="BookExamples.Chapter7.CountingSensorD.png" ALT="BookExamples.Chapter7.CountingSensor">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>divisions</TD><TD>4</TD><TD>&nbsp;</TD></TR>
<TR><TD>sample_interval</TD><TD>0.1</TD><TD>[s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> CountingSensor
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational"
>Modelica.Mechanics.Rotational</A>;
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.AbsoluteSensor"
>Rotational.Interfaces.AbsoluteSensor</A>;
  <font color="blue">parameter </font>Integer divisions=4;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> sample_interval=0.1;
<font color="blue">protected </font>
  <font color="blue">constant </font>Real pi=Modelica.Constants.pi;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> trigger_interval=2*pi/divisions;
  Integer count;
  Real s;
<font color="blue">equation </font>
  flange_a.tau = 0;
  s = <font color="red">Modelica.Math.sin</font>(flange_a.phi*divisions);
<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> then</font>
    count := 0;
  <font color="blue">end when</font>;
  <font color="blue">when </font>s &gt;= 0<font color="blue"> then</font>
    count := <font color="red">pre</font>(count) + 1;
  <font color="blue">end when</font>;
  <font color="blue">when </font><font color="red">sample</font>(sample_interval, sample_interval)<font color="blue"> then</font>
    count := 0;
    outPort.signal[1] := (<font color="red">pre</font>(count) + 1)*trigger_interval/sample_interval;
  <font color="blue">end when</font>;
<font color="blue">end </font>CountingSensor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EmptyingTank1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter7.EmptyingTank1"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.EmptyingTank1</H2>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> EmptyingTank1
  Real x;
<font color="blue">equation </font>
  <font color="red">der</font>(x) = <font color="blue">if </font>x &gt; 0<font color="blue"> then </font>-(x^.5)<font color="blue"> else </font>0.0;
<font color="blue">end </font>EmptyingTank1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EmptyingTank2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter7.EmptyingTank2"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.EmptyingTank2</H2>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> EmptyingTank2
  Real x;
  Boolean cond;
<font color="blue">equation </font>
  cond = x &gt; 0;
  <font color="red">der</font>(x) = <font color="blue">if </font>cond<font color="blue"> then </font>-(x^.5)<font color="blue"> else </font>0.0;
<font color="blue">end </font>EmptyingTank2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EmptyingTank3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.EmptyingTank3I.png" ALT="BookExamples.Chapter7.EmptyingTank3" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.EmptyingTank3"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.EmptyingTank3</H2>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> EmptyingTank3
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  Real x(start=2);
<font color="blue">equation </font>
  <font color="red">der</font>(x) = <font color="red">noEvent</font>(<font color="blue">if </font>x &gt; 0<font color="blue"> then </font>-(x^.5)<font color="blue"> else </font>0.0);
<font color="blue">end </font>EmptyingTank3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Lag<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.LagI.png" ALT="BookExamples.Chapter7.Lag" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.Lag"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.Lag</H2>
<IMG SRC="BookExamples.Chapter7.LagD.png" ALT="BookExamples.Chapter7.Lag">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>c</TD><TD>1</TD><TD>lag time constant</TD></TR>
<TR><TD>threshold</TD><TD>.7</TD><TD>logical threshold</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Lag
  <font color="blue">parameter </font>Real c=1 <font color="darkgreen">&quot;lag time constant&quot;</font>;
  <font color="blue">parameter </font>Real threshold=.7 <font color="darkgreen">&quot;logical threshold&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> outPort(n=1);
<font color="blue">protected </font>
  Real state <font color="darkgreen">&quot;Continuous state of the wire&quot;</font>;
<font color="blue">equation </font>
  c*<font color="red">der</font>(state) = <font color="blue">if </font>inPort.signal[1]<font color="blue"> then </font>1 - state<font color="blue"> else </font>-state;
  outPort.signal[1] = state &gt;= threshold;
<font color="blue">end </font>Lag;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LogicCircuit<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.LogicCircuitI.png" ALT="BookExamples.Chapter7.LogicCircuit" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.LogicCircuit"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.LogicCircuit</H2>
<IMG SRC="BookExamples.Chapter7.LogicCircuitD.png" ALT="BookExamples.Chapter7.LogicCircuit">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> LogicCircuit
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  <font color="blue">import </font>BS = <A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources"
>Modelica.Blocks.Sources</A>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanPulse"
>BS.BooleanPulse</A> i1(width={50}, period={2});
  <A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanPulse"
>BS.BooleanPulse</A> i2(width={50}, period={4});
  <A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanPulse"
>BS.BooleanPulse</A> i3(width={50}, period={8});
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
>And</A> and1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
>And</A> and2;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Or"
>Or</A> or1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
>Not</A> not1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
>Not</A> not2;
  Boolean o1;
  Boolean o2;
<font color="blue">equation </font>
  <font color="darkgreen">// o1</font>
  <font color="red">connect</font>(i3.outPort, and1.inPort2);
  <font color="red">connect</font>(not1.outPort, or1.inPort1);
  <font color="red">connect</font>(i2.outPort, or1.inPort2);
  o1 = or1.outPort.signal[1];
  <font color="darkgreen">// o2</font>
  <font color="red">connect</font>(i1.outPort, not2.inPort);
  <font color="red">connect</font>(not2.outPort, and2.inPort1);
  o2 = and2.outPort.signal[1];
  <font color="red">connect</font>(and2.inPort2, i2.outPort);
  <font color="red">connect</font>(and1.outPort, not1.inPort);
  <font color="red">connect</font>(i1.outPort, and1.inPort1);
<font color="blue">end </font>LogicCircuit;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LogicCircuitWithLag<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.LogicCircuitWithLagI.png" ALT="BookExamples.Chapter7.LogicCircuitWithLag" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.LogicCircuitWithLag"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.LogicCircuitWithLag</H2>
<IMG SRC="BookExamples.Chapter7.LogicCircuitWithLagD.png" ALT="BookExamples.Chapter7.LogicCircuitWithLag">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>c</TD><TD>1</TD><TD>lag time constant</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> LogicCircuitWithLag
  <font color="blue">extends </font><A HREF="BookExamples_Icons.html#BookExamples.Icons.RunnableExample"
>BookExamples.Icons.RunnableExample</A>;
  <font color="blue">parameter </font>Real c=1 <font color="darkgreen">&quot;lag time constant&quot;</font>;
  <font color="blue">model</font> Pulse
    <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanPulse"
>Modelica.Blocks.Sources.BooleanPulse</A>;
  <font color="blue">end </font>Pulse;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag.Pulse"
>Pulse</A> i1(period={2});
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag.Pulse"
>Pulse</A> i2(period={4});
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag.Pulse"
>Pulse</A> i3(period={8});
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
>And</A> and1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.And"
>And</A> and2;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Or"
>Or</A> or1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
>Not</A> not1;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Not"
>Not</A> not2;
  Boolean o1;
  Boolean o2;
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A> and1_lag(c=c);
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A> and2_lag(c=c);
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A> or1_lag(c=c);
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A> not1_lag(c=c);
  <A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.Lag"
>Lag</A> not2_lag(c=c);
<font color="blue">equation </font>
  <font color="red">connect</font>(i1.outPort, and1.inPort1);
  <font color="red">connect</font>(i3.outPort, and1.inPort2);
  <font color="red">connect</font>(and1.outPort, and1_lag.inPort);
  <font color="red">connect</font>(and1_lag.outPort, not1.inPort);
  <font color="red">connect</font>(not1.outPort, not1_lag.inPort);
  <font color="red">connect</font>(i2.outPort, or1.inPort2);
  <font color="red">connect</font>(or1.outPort, or1_lag.inPort);
  o1 = or1_lag.outPort.signal[1];
  <font color="red">connect</font>(i1.outPort, not2.inPort);
  <font color="red">connect</font>(not2.outPort, not2_lag.inPort);
  <font color="red">connect</font>(not2_lag.outPort, and2.inPort1);
  <font color="red">connect</font>(and2.outPort, and2_lag.inPort);
  o2 = and2_lag.outPort.signal[1];
  <font color="red">connect</font>(not1_lag.outPort, or1.inPort1);
  <font color="red">connect</font>(i2.outPort, and2.inPort2);
<font color="blue">end </font>LogicCircuitWithLag;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LogicEquation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.LogicEquationI.png" ALT="BookExamples.Chapter7.LogicEquation" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.LogicEquation"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.LogicEquation</H2>
<IMG SRC="BookExamples.Chapter7.LogicEquationD.png" ALT="BookExamples.Chapter7.LogicEquation">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> LogicEquation
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> i1(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> i2(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> i3(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> o1(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> o2(n=1);
<font color="blue">equation </font>
  o1.signal = <font color="blue">not </font>(i1.signal<font color="blue"> and </font>i3.signal)<font color="blue"> or </font>i2.signal;
  o2.signal = <font color="blue">not </font>i1.signal<font color="blue"> and </font>i2.signal;
<font color="blue">end </font>LogicEquation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Not<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.NotI.png" ALT="BookExamples.Chapter7.Not" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.Not"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.Not</H2>
<IMG SRC="BookExamples.Chapter7.NotD.png" ALT="BookExamples.Chapter7.Not">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Not
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> outPort(n=1);
<font color="blue">equation </font>
  outPort.signal = <font color="blue">not </font>inPort.signal;
<font color="blue">end </font>Not;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Or<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.OrI.png" ALT="BookExamples.Chapter7.Or" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.Or"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.Or</H2>
<IMG SRC="BookExamples.Chapter7.OrD.png" ALT="BookExamples.Chapter7.Or">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Or
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort1(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> inPort2(n=1);
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanOutPort"
>Modelica.Blocks.Interfaces.BooleanOutPort</A> outPort(n=1);
<font color="blue">equation </font>
  outPort.signal = inPort1.signal<font color="blue"> or </font>inPort2.signal;
<font color="blue">end </font>Or;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PeriodSensor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.PeriodSensorI.png" ALT="BookExamples.Chapter7.PeriodSensor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.PeriodSensor"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.PeriodSensor</H2>
<IMG SRC="BookExamples.Chapter7.PeriodSensorD.png" ALT="BookExamples.Chapter7.PeriodSensor">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>divisions</TD><TD>4</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PeriodSensor
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational"
>Modelica.Mechanics.Rotational</A>;
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.AbsoluteSensor"
>Rotational.Interfaces.AbsoluteSensor</A>;
  <font color="blue">parameter </font>Integer divisions=4;
<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> trigger_interval=2*Modelica.Constants.pi/divisions;
  <font color="blue">discrete </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> upper;
  <font color="blue">discrete </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lower;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> last_time;
<font color="blue">equation </font>
  flange_a.tau = 0;
<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">initial</font>()<font color="blue"> or </font>flange_a.phi &gt;= upper<font color="blue"> or </font>flange_a.phi &lt;= lower<font color="blue"> then</font>
    upper := flange_a.phi + trigger_interval;
    lower := flange_a.phi - trigger_interval;
    last_time := time;
    outPort.signal[1] := <font color="blue">if </font><font color="red">initial</font>()<font color="blue"> then </font>0.0<font color="blue"> else </font>trigger_interval/(time - <font color="red">
      pre</font>(last_time));
  <font color="blue">end when</font>;
<font color="blue">end </font>PeriodSensor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE QuantizedSensor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.QuantizedSensorI.png" ALT="BookExamples.Chapter7.QuantizedSensor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.QuantizedSensor"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.QuantizedSensor</H2>
<IMG SRC="BookExamples.Chapter7.QuantizedSensorD.png" ALT="BookExamples.Chapter7.QuantizedSensor">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>bits</TD><TD>4</TD><TD>&nbsp;</TD></TR>
<TR><TD>sample_interval</TD><TD>0.02</TD><TD>[s]</TD></TR>
<TR><TD>min</TD><TD>-150</TD><TD>[rad/s]</TD></TR>
<TR><TD>max</TD><TD>150</TD><TD>[rad/s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> QuantizedSensor
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational"
>Modelica.Mechanics.Rotational</A>;
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.AbsoluteSensor"
>Rotational.Interfaces.AbsoluteSensor</A>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font>Integer bits=4;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>SIunits.Time</A> sample_interval=0.02;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SIunits.AngularVelocity</A> min=-150;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SIunits.AngularVelocity</A> max=150;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SIunits.AngularVelocity</A> w;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Real delta=(max - min)/2^bits;
  Integer level;
<font color="blue">equation </font>
  w = <font color="red">der</font>(flange_a.phi);
  flange_a.tau = 0;
<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">sample</font>(0, sample_interval)<font color="blue"> then</font>
    level := <font color="red">integer</font>((w - min)/delta);
  <font color="blue">end when</font>;
  <font color="blue">if </font>level &lt; 0<font color="blue"> then</font>
    outPort.signal[1] := min;
  <font color="blue">elseif </font>level &gt;= 2^bits<font color="blue"> then</font>
    outPort.signal[1] := max;
  <font color="blue">else</font>
    outPort.signal[1] := level*delta + min;
  <font color="blue">end if</font>;
<font color="blue">end </font>QuantizedSensor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SampleHoldSensor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.SampleHoldSensorI.png" ALT="BookExamples.Chapter7.SampleHoldSensor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.SampleHoldSensor"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.SampleHoldSensor</H2>
<IMG SRC="BookExamples.Chapter7.SampleHoldSensorD.png" ALT="BookExamples.Chapter7.SampleHoldSensor">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>sample_interval</TD><TD>0.1</TD><TD>[s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SampleHoldSensor
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational"
>Modelica.Mechanics.Rotational</A>;
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.AbsoluteSensor"
>Rotational.Interfaces.AbsoluteSensor</A>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</A> w;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> sample_interval=0.1;
<font color="blue">equation </font>
  w = <font color="red">der</font>(flange_a.phi);
  flange_a.tau = 0;
<font color="blue">algorithm </font>
  <font color="blue">when </font><font color="red">sample</font>(0, sample_interval)<font color="blue"> then</font>
    outPort.signal[1] := w;
  <font color="blue">end when</font>;
<font color="blue">end </font>SampleHoldSensor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SensorBenchmark<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter7.SensorBenchmark"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7"
>BookExamples.Chapter7</A>.SensorBenchmark</H2>
<IMG SRC="BookExamples.Chapter7.SensorBenchmarkD.png" ALT="BookExamples.Chapter7.SensorBenchmark">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>sensor</TD><TD>redeclare Rotational.Sensors.SpeedSensor sensor</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SensorBenchmark
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational"
>Modelica.Mechanics.Rotational</A>;
  <font color="blue">import </font><A HREF="../../Modelica/help/Modelica_Blocks.html#Modelica.Blocks"
>Modelica.Blocks</A>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Inertia"
>Rotational.Inertia</A> inertia(J=0.8);
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Fixed"
>Rotational.Fixed</A> ground;
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Damper"
>Rotational.Damper</A> damper(d=0.2);
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Torque"
>Rotational.Torque</A> actuator;
  <font color="blue">replaceable </font><A HREF="../../Modelica/help/Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.SpeedSensor"
>Rotational.Sensors.SpeedSensor</A> sensor<font color="blue"> extends </font>
    Rotational.Interfaces.AbsoluteSensor;
  <A HREF="../../Modelica/help/Modelica_Blocks_Continuous.html#Modelica.Blocks.Continuous.PI"
>Blocks.Continuous.PI</A> controller(k={100}, T={0.1});
  <A HREF="../../Modelica/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Feedback"
>Blocks.Math.Feedback</A> feedback;
  <A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Trapezoid"
>Blocks.Sources.Trapezoid</A> ref(
    offset={50},
    rising={0.2},
    width={0.25},
    falling={0.2},
    amplitude={50});
<font color="blue">equation </font>
  <font color="red">connect</font>(ground.flange_b, damper.flange_b);
  <font color="red">connect</font>(damper.flange_a, inertia.flange_b);
  <font color="red">connect</font>(actuator.flange_b, inertia.flange_a);
  <font color="red">connect</font>(sensor.flange_a, inertia.flange_a);
  <font color="red">connect</font>(controller.outPort, actuator.inPort);
  <font color="red">connect</font>(feedback.outPort, controller.inPort);
  <font color="red">connect</font>(sensor.outPort, feedback.inPort2);
  <font color="red">connect</font>(ref.outPort, feedback.inPort1);
<font color="blue">end </font>SensorBenchmark;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Pulse<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="BookExamples.Chapter7.LogicCircuitWithLag.PulseI.png" ALT="BookExamples.Chapter7.LogicCircuitWithLag.Pulse" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="BookExamples.Chapter7.LogicCircuitWithLag.Pulse"></A><A HREF="BookExamples_Chapter7.html#BookExamples.Chapter7.LogicCircuitWithLag"
>BookExamples.Chapter7.LogicCircuitWithLag</A>.Pulse</H2>
<IMG SRC="BookExamples.Chapter7.LogicCircuitWithLag.PulseD.png" ALT="BookExamples.Chapter7.LogicCircuitWithLag.Pulse">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>width[:]</TD><TD>{50}</TD><TD>Widths of pulses in % of period</TD></TR>
<TR><TD>period[:]</TD><TD>{1}</TD><TD>Times for one period [s]</TD></TR>
<TR><TD>startTime[:]</TD><TD>{0}</TD><TD>Iime instants of first pulse [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Pulse
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.BooleanPulse"
>Modelica.Blocks.Sources.BooleanPulse</A>;
<font color="blue">end </font>Pulse;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Wed Sep 10 16:47:46 2003
.
</address></BODY>
</HTML>
