<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>BookExamples</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Functions<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter6.Chemistry.Functions"></A><A HREF="BookExamples_Chapter6_Chemistry.html#BookExamples.Chapter6.Chemistry"
>BookExamples.Chapter6.Chemistry</A>.Functions</H2>
<P><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="BookExamples_Chapter6_Chemistry_Functions.html#BookExamples.Chapter6.Chemistry.Functions.CalcReactionRate"
>CalcReactionRate</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="BookExamples_Chapter6_Chemistry_Functions.html#BookExamples.Chapter6.Chemistry.Functions.CalcMultiplier"
>CalcMultiplier</A>
</TD><TD>&nbsp;</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CalcReactionRate<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter6.Chemistry.Functions.CalcReactionRate"></A><A HREF="BookExamples_Chapter6_Chemistry_Functions.html#BookExamples.Chapter6.Chemistry.Functions"
>BookExamples.Chapter6.Chemistry.Functions</A>.CalcReactionRate</H2>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> CalcReactionRate
  <font color="blue">input </font>Integer nspecies <font color="darkgreen">&quot;Number of species&quot;</font>;
  <font color="blue">input </font>Real k <font color="darkgreen">&quot;Reaction coefficient&quot;</font>;
  <font color="blue">input </font>Real c[nspecies] <font color="darkgreen">&quot;Species concentrations&quot;</font>;
  <font color="blue">input </font>Integer reactants[:, 2] <font color="darkgreen">&quot;Reactant information&quot;</font>;
  <font color="blue">output </font>Real rate <font color="darkgreen">&quot;Reaction rate&quot;</font>;
<font color="blue">algorithm </font>
  <font color="darkgreen">// Compute rate=k*[A]^a*[B]^b...</font>
  rate := k;
  <font color="blue">for </font>i<font color="blue"> in </font>1:<font color="red">size</font>(reactants, 1)<font color="blue"> loop</font>
    rate := rate*c[reactants[i, 2]]^reactants[i, 1];
  <font color="blue">end for</font>;
  <font color="red">assert</font>(rate &gt;= -1e-12, &quot;chemical reaction moving backward&quot;);
<font color="blue">end </font>CalcReactionRate;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CalcMultiplier<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="BookExamples.Chapter6.Chemistry.Functions.CalcMultiplier"></A><A HREF="BookExamples_Chapter6_Chemistry_Functions.html#BookExamples.Chapter6.Chemistry.Functions"
>BookExamples.Chapter6.Chemistry.Functions</A>.CalcMultiplier</H2>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> CalcMultiplier
  <font color="blue">input </font>Integer nspecies;
  <font color="blue">input </font>Integer reactants[:, 2];
  <font color="blue">input </font>Integer products[:, 2];
  <font color="blue">output </font>Real m[nspecies];
<font color="blue">algorithm </font>
  m := <font color="red">zeros</font>(nspecies);
  m[reactants[:, 2]] := reactants[:, 1];
  m[products[:, 2]] := m[products[:, 2]] - products[:, 1];
<font color="blue">end </font>CalcMultiplier;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Wed Sep 10 16:48:16 2003
.
</address></BODY>
</HTML>
